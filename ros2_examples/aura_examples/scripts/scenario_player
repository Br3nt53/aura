#!/usr/bin/env python3
import argparse
import json
import pathlib
import time
import sys


def main():
    ap = argparse.ArgumentParser()
    ap.add_argument("--scenario", required=False, default="")
    ap.add_argument("--workdir", required=False, default="out/tmp")
    args, _ = ap.parse_known_args()

    out = pathlib.Path(args.workdir)
    out.mkdir(parents=True, exist_ok=True)
    pred = out / "pred.jsonl"

    # Write a tiny, valid JSONL prediction file (stub)
    with open(pred, "w") as f:
        f.write(json.dumps({"t": 0.0, "x": 0.0, "y": 0.0, "conf": 0.8}) + "\n")
        f.write(json.dumps({"t": 0.1, "x": 0.05, "y": 0.0, "conf": 0.82}) + "\n")
    time.sleep(0.1)
    print(f"[scenario_player] wrote {pred}")
    return 0


if __name__ == "__main__":
    sys.exit(main())
